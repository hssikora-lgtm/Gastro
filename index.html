<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a2a6c">

<link rel="apple-touch-icon" href="https://emojicdn.elk.sh/üç¥">
<link rel="icon" href="https://emojicdn.elk.sh/üç¥">

<title>Gastro-Tracker</title>

<style>
:root { --primary:#ff6b6b; --secondary:#4ecdc4; }
body {
    font-family:'Segoe UI',sans-serif;
    margin:0; padding:15px;
    background:linear-gradient(160deg,#1a2a6c,#b21f1f,#fdbb2d);
    background-attachment:fixed;
    color:white; min-height:100vh;
}
.container {
    background:rgba(0,0,0,.5);
    backdrop-filter:blur(15px);
    padding:20px;
    border-radius:25px;
    margin-bottom:20px;
}
h2,h3 { text-align:center; margin-top:0; }
.tabs { display:flex; gap:8px; overflow-x:auto; margin-bottom:15px; }
.tab {
    background:rgba(255,255,255,.1);
    padding:8px 12px;
    border-radius:10px;
    cursor:pointer;
}
.tab.active { background:var(--primary); font-weight:bold; }
.input-group { display:flex; flex-direction:column; gap:10px; margin-bottom:20px; }
input {
    padding:15px;
    border-radius:12px;
    border:none;
    font-size:16px;
}
button {
    padding:15px;
    border-radius:12px;
    border:none;
    background:var(--secondary);
    color:white;
    font-weight:bold;
    cursor:pointer;
}
.liste { max-height:260px; overflow-y:auto; }
.eintrag {
    background:rgba(255,255,255,.1);
    padding:12px;
    border-radius:15px;
    margin-bottom:8px;
    display:flex;
    justify-content:space-between;
}
.zeit { font-size:.75em; opacity:.8; }
.del-btn {
    background:none;
    color:#ff4757;
    border:1px solid #ff4757;
    padding:5px 10px;
    border-radius:8px;
    cursor:pointer;
}
.gesamt-box {
    text-align:center;
    font-size:1.6em;
    font-weight:bold;
    padding:15px;
    border-radius:20px;
    background:rgba(255,255,255,.15);
}
.jahr-liste {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
}
.jahr-item {
    background:rgba(255,255,255,.05);
    padding:8px;
    border-radius:10px;
    display:flex;
    justify-content:space-between;
}
.jahr-gesamt {
    grid-column:1 / span 2;
    background:var(--primary);
    padding:12px;
    border-radius:15px;
    text-align:center;
    font-weight:bold;
}
.footer { text-align:center; opacity:.5; font-size:.8em; }
</style>
</head>

<body>

<div class="container">
<h2>üç¥ Gastro-Tracker</h2>
<div class="tabs" id="monthTabs"></div>

<div class="input-group">
<input id="betrag" placeholder="Betrag in ‚Ç¨" inputmode="decimal">
<input id="ort" placeholder="Ort wird gesucht ‚Ä¶">
<button onclick="speichern()">Hinzuf√ºgen</button>
</div>

<div id="liste" class="liste"></div>
<div id="gesamt" class="gesamt-box">0,00 ‚Ç¨</div>
</div>

<div class="container">
<h3>üìä Jahres√ºbersicht</h3>
<div id="jahrUebersicht" class="jahr-liste"></div>
</div>

<div class="footer">by HauniBauni</div>

<script>
const monate=["Jan","Feb","M√§r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"];
let aktuellerTab=new Date().getMonth();
let ausgaben=JSON.parse(localStorage.getItem("gastro_v_final")||"[]");

window.onload=()=>{
    setupTabs();
    anzeigen();
    standortErmitteln();
};

async function standortErmitteln(){
    navigator.geolocation.getCurrentPosition(async pos=>{
        try{
            const r=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}&addressdetails=1`);
            const d=await r.json();
            const a=d.address||{};

            const name=a.amenity||a.restaurant||a.cafe||"";